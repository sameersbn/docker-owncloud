#!/bin/bash

## DEBUGGING
DEBUG=${DEBUG:-false}

## CORE
OWNCLOUD_CONFIG_DIR=${OWNCLOUD_CONFIG_DIR:-$OWNCLOUD_DATA_DIR/config}
OWNCLOUD_OCDATA_DIR=${OWNCLOUD_OCDATA_DIR:-$OWNCLOUD_DATA_DIR/ocdata}
OWNCLOUD_BACKUPS_DIR=${OWNCLOUD_BACKUPS_DIR:-$OWNCLOUD_DATA_DIR/backups}
OWNCLOUD_APPS_DIR=${OWNCLOUD_APPS_DIR:-$OWNCLOUD_DATA_DIR/apps}

OWNCLOUD_ADMIN_USER=${OWNCLOUD_ADMIN_USER:-admin}
OWNCLOUD_ADMIN_PASSWORD=${OWNCLOUD_ADMIN_PASSWORD:-password}

OWNCLOUD_URL=${OWNCLOUD_URL:-}
OWNCLOUD_URL=${OWNCLOUD_URL:-$PHP_FPM_ENV_OWNCLOUD_URL}
OWNCLOUD_URL=${OWNCLOUD_URL:-http://localhost}

# credits: http://stackoverflow.com/a/2506635/4799938
OWNCLOUD_FQDN=$(sed -e "s/\([^/]*\)\:\/\/\([^@]*@\)\?\([^:/]*\).*/\3/" <<< ${OWNCLOUD_URL})
if [[ $(sed -e "s/\([^/]*\)\:\/\/\([^@]*@\)\?\([^:/]*\).*/\1/" <<< ${OWNCLOUD_URL}) == https ]]; then
  OWNCLOUD_HTTPS=${OWNCLOUD_HTTPS:-on}
else
  OWNCLOUD_HTTPS=${OWNCLOUD_HTTPS:-off}
fi

OWNCLOUD_UPLOAD_MAX_FILESIZE=${OWNCLOUD_UPLOAD_MAX_FILESIZE:-4G}
OWNCLOUD_MAX_FILE_UPLOADS=${OWNCLOUD_MAX_FILE_UPLOADS:-20}

## BACKUPS
OWNCLOUD_BACKUPS_EXPIRY=${OWNCLOUD_BACKUPS_EXPIRY:-0}

## DATABASE
DB_TYPE=${DB_TYPE:-}
DB_HOST=${DB_HOST:-}
DB_PORT=${DB_PORT:-}
DB_NAME=${DB_NAME:-}
DB_USER=${DB_USER:-}
DB_PASS=${DB_PASS:-}

## PHP_FPM
OWNCLOUD_PHP_FPM_HOST=${OWNCLOUD_PHP_FPM_HOST:-}
OWNCLOUD_PHP_FPM_PORT=${OWNCLOUD_PHP_FPM_PORT:-}
